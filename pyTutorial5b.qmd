---
title: "Tutorial 5b - Mapas Interativos"
jupyter: python3
---

## Carregando os pacotes

```{python}
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
```

```{python}
import json
import ipyleaflet
import os
import requests
from ipywidgets import link, FloatSlider
from branca.colormap import linear
```

# Carregando os dados

```{python}
def load_data(url, filename, file_type):
    r = requests.get(url)
    with open(filename, 'w') as f:
        f.write(r.content.decode("utf-8"))
    with open(filename, 'r') as f:
        return file_type(f)
```

```{python}
geo_json_data = load_data(
    'https://raw.githubusercontent.com/jupyter-widgets/ipyleaflet/master/examples/us-states.json',
    'us-states.json',
     json.load)
```

```{python}
unemployment = pd.read_csv('https://raw.githubusercontent.com/jupyter-widgets/ipyleaflet/master/examples/US_Unemployment_Oct2012.csv')
```

```{python}
unemployment.head()
```

```{python}
unemployment =  dict(zip(unemployment['State'].tolist(), unemployment['Unemployment'].tolist()))

```

# Fazendo o mapa

```{python}
layer = ipyleaflet.Choropleth(
    geo_data=geo_json_data,
    choro_data=unemployment,
    colormap=linear.YlOrRd_04,
    border_color='black',
    style={'fillOpacity': 0.8, 'dashArray': '5, 5'})
    
m = ipyleaflet.Map(center = (43,-100), zoom = 4)
m.add(layer)
m
```
